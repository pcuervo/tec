/*! TEC 2015-03-24 */
function runCycle(a){$(a).on("cycle-initialized cycle-after",function(){videoEnds(".cycle-slide-active .covervid-video")}),$(a).cycle({fx:"scrollHorz",timeout:0,swipe:!0,slides:".covervid-wrapper--wrapper",youtube:!0,log:!1}),toggleVideoPlay(a)}function cycleNext(){$(".js-slideshow").cycle("next")}function runFitVids(a){$(a).fitVids()}function runFitText(a,b){$(a).fitText(b)}function runMCustomScrollbar(a){$(a).mCustomScrollbar({theme:"minimal"})}function openModal(a){aAbrir=$("#modal-"+a+".modal-wrapper"),aAbrir.removeClass("hide")}function closeModal(){$(".modal-wrapper").addClass("hide")}function openSearch(){$(".search-form--wrapper").addClass("opened")}function closeSearch(){$(".search-form--wrapper").removeClass("opened")}function isTop(){var a=$(window).scrollTop();return 0>=a?!0:!1}function toggleCover(a){return a?(showCover(),showGrid(),void($("#modal-historia").hasClass("hide")&&playVideo(".cycle-slide-active .covervid-video"))):(hideCover(),hideGrid(),void pauseVideos(".covervid-wrapper--wrapper .covervid-video"))}function showCover(){$(".cover").removeClass("closed")}function hideCover(){$(".cover").addClass("closed")}function showGrid(){$(".grid").removeClass("closed")}function hideGrid(){$(".grid").addClass("closed")}function toggleVideoPlay(a){$(a).on("cycle-after",function(a,b,c,d){$(d);$(".covervid-wrapper--wrapper .covervid-video").each(function(){$(this)[0].pause()}),playVideo(".cycle-slide-active .covervid-video")})}function pauseVideos(a){$(a).each(function(){$(this)[0].pause()})}function playVideo(a){$(a).get(0).play()}function videoEnds(a){$(a).each(function(){$(this).bind("ended",function(){cycleNext()})})}function formValidation(a){$(a).validate({submitHandler:function(){switch(a){case".forma-tu-historia":guardarHistoria()}}})}function postToFacebook(a,b,c){FB.ui({method:"feed",name:a,link:b,caption:c},function(){})}function radioIsSelected(a){"nombre"==$(a+" input[name='radio-search']:checked").val()?($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-nombre").show(),$(".js-search-nombre input").addClass("required"),$(".js-search-submit").show()):"campus"==$(a+" input[name='radio-search']:checked").val()?($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-campus").show(),$(".js-search-campus select").addClass("required"),$(".js-search-submit").show()):"generacion"==$(a+" input[name='radio-search']:checked").val()&&($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-generacion").show(),$(".js-search-generacion select").addClass("required"),$(".js-search-submit").show())}function loginFacebook(){FB.login(function(a){var b=a.authResponse.accessToken;a.authResponse?(console.log("El usuario autorizó ingresar con Facebook..."),FB.api("/me",function(a){mostrarFotoPerfilHistoria(a.id,50,50),$(".js-nombre").val(a.name),$(".js-fb-id").val(a.id),$(".js-fb-token").val(b),$(".step-1").addClass("hidden--xmall"),$(".step-2").removeClass("hidden--xmall"),existeHistoriaUsuario(a.id)})):console.log("El usuario canceló o no aceptó ingresar con Facebook...")},{scope:"publish_actions, user_photos"})}function mostrarFotoPerfilHistoria(a,b,c){FB.api("/"+a+"/picture",{redirect:!1,height:c,width:b,type:"normal"},function(a){if(a&&!a.error){var b='<img src="'+a.data.url+'" />';$(".forma-tu-historia").prepend(b)}})}function mostrarFotoPerfilSingle(a,b,c){FB.api("/"+a+"/picture",{redirect:!1,height:c,width:b,type:"normal"},function(a){if(a&&!a.error){$(".js-profile-pic").empty();var b='<img src="'+a.data.url+'" />';$(".js-profile-pic").prepend(b)}})}function getFacebookAlbums(a){console.log("getting Facebook albums..."),FB.api("/"+a+"/albums",function(a){var b=[];a&&!a.error&&(b=getAlbumsId(a.data));$.each(b,function(a,b){getAlbumPhotos(b)})})}function getAlbumsId(a){var b=[];return $.each(a,function(a,c){b.push(c.id)}),b}function getAlbumPhotos(a){FB.api("/"+a+"/photos",function(a){if(a&&!a.error){var b=[];b=addPhoto(a.data)}})}function addPhoto(a){$.each(a,function(a,b){var c='<img src="'+b.source+'" class="[ fb-photo ]" />';$(".js-facebook-photos-container").append(c)})}function postToWall(a,b){FB.api("/me/feed","POST",{message:b,access_token:a},function(a){a&&!a.error,console.log(a)})}function guardarHistoria(){var a=$(".forma-tu-historia").serializeArray();$.post(ajax_url,a,function(a){console.log(a);var b=a.access_token,c=$('textarea[name="historia"]').val();console.log(c),console.log(b),postToWall(b,c),$(".step-2").addClass("hidden--xmall"),$(".step-3").removeClass("hidden--xmall")})}function insertPostContent(a){var b={};b.action="get_post_meta_content",b.post_id=a,$.post(ajax_url,b,function(a){var b=$.parseJSON(a);mostrarFotoPerfilSingle(b.meta_content.fb_id,150,150),$("#modal-historia h2").text(b.meta_content.titulo),$("#modal-historia .js-nombre").text(b.meta_content.nombre),$("#modal-historia .js-puesto").text(b.meta_content.puesto),$("#modal-historia .js-generacion").text(b.meta_content.generacion),$("#modal-historia .js-nombre").text(b.meta_content.nombre),$("#modal-historia .js-imagen").text(b.meta_content.imagen),$("#modal-historia .js-historia").text(b.meta_content.historia)})}function existeHistoriaUsuario(a){var b={};b.action="tiene_historia",b.facebook_id=a,$.ajax({async:!1,type:"post",url:ajax_url,data:b,success:function(a){"1"==a&&($(".step-2").addClass("hidden--xmall"),$(".step-4").removeClass("hidden--xmall"))}})}!function(a){"use strict";a(function(){})}(jQuery);var $=jQuery.noConflict();