/*! TEC 2015-04-21 */
function runCycle(a){$(a).cycle({fx:"scrollHorz",timeout:0,swipe:!0,youtube:!0,log:!1})}function cycleNext(){$(".js-slideshow").cycle("next")}function runFitVids(a){$(a).fitVids()}function runFitText(a,b){$(a).fitText(b)}function runMCustomScrollbar(a){$(a).mCustomScrollbar({theme:"minimal"})}function openModal(a){aAbrir=$("#modal-"+a+".modal-wrapper"),aAbrir.removeClass("hide")}function closeModal(){$(".modal-wrapper").addClass("hide")}function openSearch(){$(".search-form--wrapper").addClass("opened")}function closeSearch(){$(".search-form--wrapper").removeClass("opened")}function isTop(){var a=$(window).scrollTop();return 0>=a?!0:!1}function toggleCover(a){return a?(showCover(),showGrid(),void $("#modal-historia").hasClass("hide")):(hideCover(),void hideGrid())}function showCover(){$(".cover").removeClass("closed")}function hideCover(){$(".cover").addClass("closed")}function showGrid(){$(".grid").removeClass("closed")}function hideGrid(){$(".grid").addClass("closed")}function toggleVideoPlay(a){$(a).on("cycle-after",function(a,b,c,d){$(d);$(".covervid-wrapper--wrapper .covervid-video").each(function(){$(this)[0].pause()}),playVideo(".cycle-slide-active .covervid-video")})}function pauseVideos(a){$(a).each(function(){$(this)[0].pause()})}function playVideo(a){$(a).get(0).play()}function videoEnds(a){$(a).each(function(){$(this).bind("ended",function(){cycleNext()})})}function formValidation(a){$(a).validate({submitHandler:function(){switch(a){case".forma-tu-historia":guardarHistoria();break;default:form.submit()}}})}function radioIsSelected(a){"nombre"==$(a+" input[name='radio-search']:checked").val()?($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-nombre").show(),$(".js-search-nombre input").addClass("required"),$(".js-search-submit").show()):"campus"==$(a+" input[name='radio-search']:checked").val()?($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-campus").show(),$(".js-search-campus select").addClass("required"),$(".js-search-submit").show()):"generacion"==$(a+" input[name='radio-search']:checked").val()&&($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-generacion").show(),$(".js-search-generacion select").addClass("required"),$(".js-search-submit").show())}function loginFacebook(){FB.login(function(a){var b=a.authResponse.accessToken;a.authResponse?(console.log("El usuario autorizó ingresar con Facebook..."),FB.api("/me",function(a){mostrarFotoPerfilHistoria(a.id,50,50),agregarFotoPerfilHistoria(a.id),$(".js-nombre").val(a.name),$(".js-fb-id").val(a.id),$(".js-fb-token").val(b),$(".step-1").addClass("hidden--xmall"),$(".step-2").removeClass("hidden--xmall"),existeHistoriaUsuario(a.id)})):console.log("El usuario canceló o no aceptó ingresar con Facebook...")},{scope:"publish_actions, user_photos"})}function mostrarFotoPerfilHistoria(a,b,c){FB.api("/"+a+"/picture",{redirect:!1,height:c,width:b,type:"normal"},function(a){if(a&&!a.error){var b='<img src="'+a.data.url+'" />';$(".forma-tu-historia").prepend(b)}})}function agregarFotoPerfilHistoria(a){FB.api("/"+a+"/picture",{redirect:!1,height:600,width:600,type:"large"},function(a){a&&!a.error&&$(".js-fb-profile-pic").val(a.data.url)})}function mostrarFotoPerfilSingle(a,b,c){FB.api("/"+a+"/picture",{redirect:!1,height:c,width:b,type:"normal"},function(a){if(a&&!a.error){$(".js-profile-pic").empty();var b='<img src="'+a.data.url+'" />';$(".js-profile-pic").prepend(b)}})}function getFacebookAlbums(a){FB.api("/"+a+"/albums",function(a){$.each(a.data,function(a,b){var c=b.id,d=b.name,e=b.cover_photo;showAlbumInfo(c,d,e)})})}function showAlbumInfo(a,b){FB.api("/"+a+"/picture",function(c){var d=c.data.url;html_album=getAlbumHTML(a,b,d),$(".js-facebook-albums-container").append(html_album)})}function getAlbumHTML(a,b,c){return album_html=' <div data-id="'+a+'"><img src="'+c+'" /><h3>'+b+"</h3></div>"}function getAlbumsId(a){var b=[];return $.each(a,function(a,c){b.push(c.id)}),b}function getAlbumPhotos(a){FB.api("/"+a+"/photos",function(a){if(a&&!a.error){var b=[];b=addPhoto(a.data)}})}function addPhoto(a){$.each(a,function(a,b){var c='<img src="'+b.source+'" class="[ fb-photo ]" />';$(".js-fb-photo-url").val(b.source),$(".js-facebook-photos-container").append(c)})}function postToWall(a,b){FB.api("/me/feed","POST",{message:b,access_token:a},function(a){a&&!a.error,console.log(a)})}function shareOnFacebook(){FB.ui({method:"share",href:"url"},function(a){a&&!a.error_code})}function guardarHistoria(){var a=$(".forma-tu-historia").serializeArray();$.post(ajax_url,a,function(){$('textarea[name="historia"]').val();$(".step-2").addClass("hidden--xmall"),$(".step-3").removeClass("hidden--xmall")})}function insertPostContent(a){var b={};b.action="get_post_meta_content",b.post_id=a,$.post(ajax_url,b,function(a){var b=$.parseJSON(a);$("#modal-historia h2").text(b.meta_content.titulo),$("#modal-historia .js-nombre").text(b.meta_content.nombre),$("#modal-historia .js-puesto").text(b.meta_content.puesto),$("#modal-historia .js-generacion").text(b.meta_content.generacion),$("#modal-historia .js-nombre").text(b.meta_content.nombre),$("#modal-historia .js-profile-pic img").attr("src",b.meta_content.profile_pic),$("#modal-historia .js-historia").text(b.meta_content.historia),""!==b.meta_content.facebook_img&&$("#modal-historia .js-facebook-pic img").attr("src",b.meta_content.facebook_img)})}function existeHistoriaUsuario(a){var b={};b.action="tiene_historia",b.facebook_id=a,$.ajax({async:!1,type:"post",url:ajax_url,data:b,success:function(a){"1"==a&&($(".step-2").addClass("hidden--xmall"),$(".step-4").removeClass("hidden--xmall"))}})}!function(a){"use strict";a(function(){})}(jQuery);var $=jQuery.noConflict();