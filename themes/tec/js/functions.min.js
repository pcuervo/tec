/*! TEC 2015-04-23 */
function runCycle(a){$(a).cycle({fx:"scrollHorz",timeout:0,swipe:!0,youtube:!0,log:!1})}function cycleNext(){$(".js-slideshow").cycle("next")}function runFitVids(a){$(a).fitVids()}function runFitText(a,b){$(a).fitText(b)}function runMCustomScrollbar(a){$(a).mCustomScrollbar({theme:"minimal"})}function openModal(a){aAbrir=$("#modal-"+a+".modal-wrapper"),aAbrir.removeClass("hide")}function closeModal(){$(".modal-wrapper").addClass("hide"),$("body").removeClass("body-modal")}function openSearch(){$(".search-form--wrapper").addClass("opened")}function closeSearch(){$(".search-form--wrapper").removeClass("opened")}function isTop(){var a=$(window).scrollTop();return 10>=a?(console.log(!0),!0):(console.log(!1),!1)}function toggleCover(a){return a?void showGrid():void hideGrid()}function showCover(){$(".cover").removeClass("closed")}function hideCover(){$(".cover").addClass("closed")}function showGrid(){$(".grid").removeClass("closed")}function hideGrid(){$(".grid").addClass("closed")}function scrollDown(a){var b=$(a).offset().top;b-=$("header").height(),$("html, body").animate({scrollTop:b},650)}function toggleVideoPlay(a){$(a).on("cycle-after",function(a,b,c,d){$(d);$(".covervid-wrapper--wrapper .covervid-video").each(function(){$(this)[0].pause()}),playVideo(".cycle-slide-active .covervid-video")})}function pauseVideos(a){$(a).each(function(){$(this)[0].pause()})}function playVideo(a){$(a).get(0).play()}function videoEnds(a){$(a).each(function(){$(this).bind("ended",function(){cycleNext()})})}function formValidation(a){$(a).validate({rules:{},submitHandler:function(){switch(a){case".forma-tu-historia":guardarHistoria();break;default:form.submit()}}})}function radioIsSelected(a){"nombre"==$(a+" input[name='radio-search']:checked").val()?($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-nombre").show(),$(".js-search-nombre input").addClass("required"),$(".js-search-submit").show()):"campus"==$(a+" input[name='radio-search']:checked").val()?($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-campus").show(),$(".js-search-campus select").addClass("required"),$(".js-search-submit").show()):"generacion"==$(a+" input[name='radio-search']:checked").val()&&($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-generacion").show(),$(".js-search-generacion select").addClass("required"),$(".js-search-submit").show())}function clearModalStory(){$("#modal-historia h2").text(""),$("#modal-historia .js-nombre").text(""),$("#modal-historia .js-puesto").text(""),$("#modal-historia .js-generacion").text(""),$("#modal-historia .js-campus").text(""),$("#modal-historia .js-nombre").text(""),$("#modal-historia .js-profile-pic img").attr("src",""),$("#modal-historia .js-historia p").text(""),$("#modal-historia .js-facebook-pic img").attr("src","")}function loginFacebook(){FB.login(function(a){var b=a.authResponse.accessToken;a.authResponse?(console.log("El usuario autorizó ingresar con Facebook..."),FB.api("/me",function(a){mostrarFotoPerfilHistoria(a.id,50,50),agregarFotoPerfilHistoria(a.id),$(".js-nombre").val(a.name),$(".js-fb-id").val(a.id),$(".js-fb-token").val(b),$(".step-1").addClass("hidden--xmall"),$(".step-2").removeClass("hidden--xmall"),existeHistoriaUsuario(a.id)})):console.log("El usuario canceló o no aceptó ingresar con Facebook...")},{scope:"publish_actions, user_photos"})}function mostrarFotoPerfilHistoria(a,b,c){FB.api("/"+a+"/picture",{redirect:!1,height:c,width:b,type:"normal"},function(a){if(a&&!a.error){var b='<img src="'+a.data.url+'" />';$(".forma-tu-historia").prepend(b)}})}function agregarFotoPerfilHistoria(a){FB.api("/"+a+"/picture",{redirect:!1,height:600,width:600,type:"large"},function(a){a&&!a.error&&$(".js-fb-profile-pic").val(a.data.url)})}function mostrarFotoPerfilSingle(a,b,c){FB.api("/"+a+"/picture",{redirect:!1,height:c,width:b,type:"normal"},function(a){if(a&&!a.error){$(".js-profile-pic").empty();var b='<img src="'+a.data.url+'" />';$(".js-profile-pic").prepend(b)}})}function getFacebookAlbums(a){FB.api("/"+a+"/albums",function(a){$.each(a.data,function(a,b){var c=b.id,d=b.name,e=b.cover_photo;showAlbumInfo(c,d,e)})})}function showAlbumInfo(a,b,c){console.log(a+b+c),FB.api("/"+a+"/picture",function(c){console.log(c);var d=c.data.url;html_album=getAlbumHTML(a,b,d),$(".js-facebook-albums-container").append(html_album).addClass("open")})}function getAlbumHTML(a,b,c){return album_html=' <div data-id="'+a+'"><img src="'+c+'" /><h3>'+b+"</h3></div>"}function getAlbumsId(a){var b=[];return $.each(a,function(a,c){b.push(c.id)}),b}function getAlbumPhotos(a){FB.api("/"+a+"/photos",function(a){if(a&&!a.error){var b=[];b=addPhoto(a.data)}})}function addPhoto(a){$(".js-facebook-photos-container > div").remove();$.each(a,function(a,b){var c='<div class="[ margin-bottom--small ]"><img src="'+b.source+'" class="[ fb-photo ]" /><div>';$(".js-fb-photo-url").val(b.source),$(".js-facebook-photos-container").append(c).addClass("open")})}function postToWall(a,b){FB.api("/me/feed","POST",{message:b,access_token:a},function(a){a&&!a.error,console.log(a)})}function shareOnFacebook(a){console.log(a),FB.ui({method:"share",href:a},function(a){a&&!a.error_code})}function guardarHistoria(){$('.forma-tu-historia button[type="submit"]').html("Enviando…");var a=($(".forma-tu-historia").serializeArray(),new FormData);$.each($("#file")[0].files,function(b,c){a.append("file-"+b,c)}),a.append("nombre",$(".js-nombre").val()),a.append("puesto",$('input[name="puesto"]').val()),a.append("campus",$('select[name="campus"] option:selected').text().replace("Campus","")),a.append("generacion",$('select[name="generacion"] option:selected').text().replace("Generación","")),$('input[name="acepto"]:checked').length>0?a.append("acepto","true"):a.append("acepto","false"),a.append("historia",$('textarea[name="historia"]').val()),a.append("titulo",$('textarea[name="titulo"]').val()),a.append("id",$(".js-fb-id").val()),a.append("access_token",$(".js-fb-token").val()),a.append("fb_profile_pic",$(".js-fb-profile-pic").val()),a.append("fb_photo_url",$(".js-fb-photo-url").val()),a.append("is_upload",$(".js-is-upload").val()),a.append("action","guardar_historia"),$.ajax({url:ajax_url,data:a,processData:!1,contentType:!1,type:"POST",success:function(a){var b=$.parseJSON(a);return"1"==b.error?(alert(b.msg),0):($(".step-2").addClass("hidden--xmall"),void $(".step-3").removeClass("hidden--xmall"))}})}function insertPostContent(a){var b={};b.action="get_post_meta_content",b.post_id=a,$.post(ajax_url,b,function(a){var b=$.parseJSON(a);$("#modal-historia h2").text(b.meta_content.titulo),$("#modal-historia .js-nombre").text(b.meta_content.nombre),$("#modal-historia .js-puesto").text(b.meta_content.puesto),$("#modal-historia .js-generacion").text("Generación "+b.meta_content.generacion),$("#modal-historia .js-campus").text("Campus "+b.meta_content.campus),$("#modal-historia .js-nombre").text(b.meta_content.nombre),$("#modal-historia .js-profile-pic img").attr("src",b.meta_content.profile_pic),$("#modal-historia .js-historia p").text(b.meta_content.historia),$(".js-facebook-pic").hide(),""!==b.meta_content.facebook_img&&($("#modal-historia .js-facebook-pic img").attr("src",b.meta_content.facebook_img),$(".js-facebook-pic").show())})}function existeHistoriaUsuario(a){var b={};b.action="tiene_historia",b.facebook_id=a,$.ajax({async:!1,type:"post",url:ajax_url,data:b,success:function(a){"1"==a&&($(".step-2").addClass("hidden--xmall"),$(".step-4").removeClass("hidden--xmall"))}})}!function(a){"use strict";a(function(){})}(jQuery);var $=jQuery.noConflict(),selector,logActivity,callbackAlbumSelected,callbackPhotoUnselected,callbackSubmit,buttonOK=$("#CSPhotoSelector_buttonOK"),o=this;fbphotoSelect=function(a){a||(a="me"),callbackAlbumSelected=function(a){var b;b=CSPhotoSelector.getAlbumById(a),selector.showPhotoSelector(null,b.id)},callbackAlbumUnselected=function(a){var b;b=CSPhotoSelector.getAlbumById(a)},callbackPhotoSelected=function(a){var b;b=CSPhotoSelector.getPhotoById(a),buttonOK.show(),logActivity("Selected ID: "+b.id)},callbackPhotoUnselected=function(a){album=CSPhotoSelector.getPhotoById(a),buttonOK.hide()},callbackSubmit=function(a){var b;b=CSPhotoSelector.getPhotoById(a),logActivity("<br><strong>Submitted</strong><br> Photo ID: "+b.id+"<br>Photo URL: "+b.source+"<br>")},CSPhotoSelector.init({debug:!0}),selector=CSPhotoSelector.newInstance({callbackAlbumSelected:callbackAlbumSelected,callbackAlbumUnselected:callbackAlbumUnselected,callbackPhotoSelected:callbackPhotoSelected,callbackPhotoUnselected:callbackPhotoUnselected,callbackSubmit:callbackSubmit,maxSelection:1,albumsPerPage:6,photosPerPage:200,autoDeselection:!0}),selector.reset(),selector.showAlbumSelector(a)};