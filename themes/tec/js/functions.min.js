/*! TEC 2015-03-12 */
function runCycle(a){$(a).on("cycle-initialized cycle-after",function(){videoEnds(".cycle-slide-active .covervid-video")}),$(a).cycle({fx:"scrollHorz",timeout:0,swipe:!0,slides:".covervid-wrapper--wrapper",youtube:!0,log:!1}),toggleVideoPlay(a)}function cycleNext(){$(".js-slideshow").cycle("next")}function runFitVids(a){$(a).fitVids()}function runFitText(a,b){$(a).fitText(b)}function runMCustomScrollbar(a){$(a).mCustomScrollbar({theme:"minimal"})}function openModal(a){var b=a.data("modal");b=$("#modal-"+b+".modal-wrapper"),b.removeClass("hide")}function closeModal(){$(".modal-wrapper").addClass("hide")}function openSearch(){$(".search-form--wrapper").addClass("opened")}function closeSearch(){$(".search-form--wrapper").removeClass("opened")}function isTop(){var a=$(window).scrollTop();return 0>=a?!0:!1}function toggleCover(a){return a?(showCover(),showGrid(),void($("#modal-historia").hasClass("hide")&&playVideo(".cycle-slide-active .covervid-video"))):(hideCover(),hideGrid(),void pauseVideos(".covervid-wrapper--wrapper .covervid-video"))}function showCover(){$(".cover").removeClass("closed")}function hideCover(){$(".cover").addClass("closed")}function showGrid(){$(".grid").removeClass("closed")}function hideGrid(){$(".grid").addClass("closed")}function toggleVideoPlay(a){$(a).on("cycle-after",function(a,b,c,d){$(d);$(".covervid-wrapper--wrapper .covervid-video").each(function(){$(this)[0].pause()}),playVideo(".cycle-slide-active .covervid-video")})}function pauseVideos(a){$(a).each(function(){$(this)[0].pause()})}function playVideo(a){$(a).get(0).play()}function videoEnds(a){$(a).each(function(){$(this).bind("ended",function(){cycleNext()})})}function formValidation(a){$(a).validate({submitHandler:function(){switch(a){case".forma-tu-historia":guardarHistoria()}}})}function postToFacebook(a,b,c){FB.ui({method:"feed",name:a,link:b,caption:c},function(){})}function loginFacebook(){FB.login(function(a){a.authResponse?(console.log("El usuario autorizó ingresar con Facebook..."),FB.api("/me",function(a){mostrarFotoPerfilHistoria(a.id,50,50),$(".js-nombre").val(a.name),$(".js-fb-id").val(a.id),$(".step-1").addClass("hidden--xmall"),$(".step-2").removeClass("hidden--xmall"),existeHistoriaUsuario(a.id)})):console.log("El usuario canceló o no aceptó ingresar con Facebook...")},{scope:"public_profile, publish_actions"})}function mostrarFotoPerfilHistoria(a,b,c){FB.api("/"+a+"/picture",{redirect:!1,height:c,width:b,type:"normal"},function(a){if(a&&!a.error){var b='<img src="'+a.data.url+'" />';$(".forma-tu-historia").prepend(b)}})}function mostrarFotoPerfilSingle(a,b,c){FB.api("/"+a+"/picture",{redirect:!1,height:c,width:b,type:"normal"},function(a){if(a&&!a.error){var b='<img src="'+a.data.url+'" />';console.log(b),$(".js-profile-pic").prepend(b)}})}function radioIsSelected(a){console.log(a),"nombre"==$(a+" input[name='radio-search']:checked").val()?($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-nombre").show(),$(".js-search-nombre input").addClass("required"),$(".js-search-submit").show()):"campus"==$(a+" input[name='radio-search']:checked").val()?($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-campus").show(),$(".js-search-campus select").addClass("required"),$(".js-search-submit").show()):"generacion"==$(a+" input[name='radio-search']:checked").val()&&($(".search-field").hide(),$(".search-field input, .search-field select").removeClass("required"),$(".js-search-generacion").show(),$(".js-search-generacion select").addClass("required"),$(".js-search-submit").show())}function guardarHistoria(){var a=$(".forma-tu-historia").serializeArray();$.post(ajax_url,a,function(){$(".step-2").addClass("hidden--xmall"),$(".step-3").removeClass("hidden--xmall")})}function insertPostContent(a){var b=$(a).data("id"),c={};c.action="get_post_meta_content",c.post_id=b,$.post(ajax_url,c,function(a){console.log(a);var b=$.parseJSON(a);console.log(b.meta_content.fb_id),mostrarFotoPerfilSingle(b.meta_content.fb_id,150,150),$("#modal-historia h2").text(b.meta_content.titulo),$("#modal-historia .js-nombre").text(b.meta_content.nombre),$("#modal-historia .js-puesto").text(b.meta_content.puesto),$("#modal-historia .js-generacion").text(b.meta_content.generacion),$("#modal-historia .js-nombre").text(b.meta_content.nombre),$("#modal-historia .js-imagen").text(b.meta_content.imagen),$("#modal-historia .js-historia").text(b.meta_content.historia)})}function existeHistoriaUsuario(a){var b={};b.action="tiene_historia",b.facebook_id=a,console.log(a),$.ajax({async:!1,type:"post",url:ajax_url,data:b,success:function(a){"1"==a&&($(".step-2").addClass("hidden--xmall"),$(".step-4").removeClass("hidden--xmall"))}})}!function(a){"use strict";a(function(){})}(jQuery);var $=jQuery.noConflict();